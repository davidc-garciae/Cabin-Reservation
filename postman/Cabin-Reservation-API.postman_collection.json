{
	"info": {
		"_postman_id": "cabin-reservation-api",
		"name": "Cabin Reservation API",
		"description": "Colecci√≥n completa para probar todos los endpoints de la API de reservas de caba√±as",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "cabin-reservation"
	},
	"item": [
		{
			"name": "üîê Authentication",
			"item": [
				{
					"name": "Login - Admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.collectionVariables.set('access_token_admin', response.accessToken);",
									"    pm.collectionVariables.set('refresh_token_admin', response.refreshToken);",
									"    console.log('Admin tokens saved');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"documentNumber\": \"12345678\",\n  \"password\": \"Admin#12345\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						},
						                        "description": "Login como administrador usando documento 12345678 y contrase√±a Admin#12345"
					},
					"response": []
				},
				{
					"name": "Login - Profesor",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.collectionVariables.set('access_token_professor', response.accessToken);",
									"    pm.collectionVariables.set('refresh_token_professor', response.refreshToken);",
									"    console.log('Professor tokens saved');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"documentNumber\": \"87654321\",\n  \"password\": \"1234\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						},
						"description": "Login como profesor usando documento 87654321 y PIN 1234"
					},
					"response": []
				},
				{
					"name": "Login - Pensionado",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.collectionVariables.set('access_token_retiree', response.accessToken);",
									"    pm.collectionVariables.set('refresh_token_retiree', response.refreshToken);",
									"    console.log('Retiree tokens saved');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"documentNumber\": \"99887766\",\n  \"password\": \"1234\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						},
						"description": "Login como pensionado usando documento 99887766 y PIN 1234"
					},
					"response": []
				},
				{
					"name": "Refresh Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"refreshToken\": \"{{refresh_token_admin}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/refresh",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"refresh"
							]
						},
						"description": "Renovar token de acceso usando refresh token"
					},
					"response": []
				},
				{
					"name": "Recover Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"documentNumber\": \"12345678\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/recover-password",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"recover-password"
							]
						},
						"description": "Solicitar recuperaci√≥n de contrase√±a por n√∫mero de documento"
					},
					"response": []
				},
				{
					"name": "Reset Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\": \"abc123def456\",\n  \"newPin\": \"1234\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/reset-password",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"reset-password"
							]
						},
						"description": "Restablecer contrase√±a usando token de recuperaci√≥n"
					},
					"response": []
				},
				{
					"name": "Validate Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\": \"{{access_token_admin}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/validate-token",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"validate-token"
							]
						},
						"description": "Validar si un token JWT es v√°lido"
					},
					"response": []
				},
				{
					"name": "Register New User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.collectionVariables.set('access_token_new_user', response.accessToken);",
									"    pm.collectionVariables.set('refresh_token_new_user', response.refreshToken);",
									"    console.log('New user tokens saved');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
                        "raw": "{\n  \"documentNumber\": \"99999999\",\n  \"email\": \"nuevo.usuario@email.com\",\n  \"name\": \"Nuevo Usuario\",\n  \"phone\": \"+57-300-999-9999\",\n  \"pin\": \"1234\",\n  \"role\": \"PROFESSOR\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/register",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"register"
							]
						},
						"description": "Registro p√∫blico de nuevo usuario con documento v√°lido"
					},
					"response": []
				}
			],
			"description": "Endpoints de autenticaci√≥n y autorizaci√≥n"
		},
		{
			"name": "üè† Cabins (P√∫blico)",
			"item": [
				{
					"name": "Get All Cabins",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/cabins",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"cabins"
							]
						},
						"description": "Obtener todas las caba√±as disponibles (p√∫blico)"
					},
					"response": []
				},
				{
					"name": "Get Cabin by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/cabins/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"cabins",
								"1"
							]
						},
						"description": "Obtener caba√±a espec√≠fica por ID"
					},
					"response": []
				},
				{
					"name": "Search Cabins",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/cabins/search?minCapacity=4&minPrice=100000&maxPrice=200000&name=bosque",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"cabins",
								"search"
							],
							"query": [
								{
									"key": "minCapacity",
									"value": "4",
									"description": "Capacidad m√≠nima"
								},
								{
									"key": "minPrice",
									"value": "100000",
									"description": "Precio m√≠nimo"
								},
								{
									"key": "maxPrice",
									"value": "200000",
									"description": "Precio m√°ximo"
								},
								{
									"key": "name",
									"value": "bosque",
									"description": "Nombre de caba√±a (b√∫squeda parcial)"
								}
							]
						},
						"description": "Buscar caba√±as por criterios espec√≠ficos"
					},
					"response": []
				}
			],
			"description": "Endpoints p√∫blicos para consultar caba√±as"
		},
		{
			"name": "üìÖ Availability (P√∫blico)",
			"item": [
				{
					"name": "Get Available Dates",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/availability",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"availability"
							]
						},
						"description": "Obtener lista de fechas disponibles"
					},
					"response": []
				},
				{
					"name": "Get Availability Calendar",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/availability/calendar?year=2024&month=3",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"availability",
								"calendar"
							],
							"query": [
								{
									"key": "year",
									"value": "2024"
								},
								{
									"key": "month",
									"value": "3"
								}
							]
						},
						"description": "Obtener calendario de disponibilidad como mapa"
					},
					"response": []
				},
				{
					"name": "Get Availability Calendar List",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/availability/calendar/list?year=2024&month=3",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"availability",
								"calendar",
								"list"
							],
							"query": [
								{
									"key": "year",
									"value": "2024"
								},
								{
									"key": "month",
									"value": "3"
								}
							]
						},
						"description": "Obtener calendario de disponibilidad como lista"
					},
					"response": []
				},
				{
					"name": "Get Available Dates for Specific Cabin",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/availability/cabin/{{cabin_id_forest}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"availability",
								"cabin",
								"{{cabin_id_forest}}"
							]
						},
						"description": "Obtener fechas disponibles para una caba√±a espec√≠fica (Caba√±a del Bosque)"
					},
					"response": []
				},
				{
					"name": "Get Availability Calendar for Specific Cabin",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/availability/cabin/{{cabin_id_forest}}/calendar?year=2024&month=3",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"availability",
								"cabin",
								"{{cabin_id_forest}}",
								"calendar"
							],
							"query": [
								{
									"key": "year",
									"value": "2024"
								},
								{
									"key": "month",
									"value": "3"
								}
							]
						},
						"description": "Obtener calendario de disponibilidad para una caba√±a espec√≠fica"
					},
					"response": []
				},
				{
					"name": "Check Availability for Date Range",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/availability/cabin/{{cabin_id_forest}}/check?startDate=2024-03-20&endDate=2024-03-25",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"availability",
								"cabin",
								"{{cabin_id_forest}}",
								"check"
							],
							"query": [
								{
									"key": "startDate",
									"value": "2024-03-20"
								},
								{
									"key": "endDate",
									"value": "2024-03-25"
								}
							]
						},
						"description": "Verificar si una caba√±a est√° disponible en un rango de fechas espec√≠fico"
					},
					"response": []
				},
				{
					"name": "Check Availability for Blocked Dates (Should Return False)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/availability/cabin/{{cabin_id_forest}}/check?startDate=2024-03-15&endDate=2024-03-16",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"availability",
								"cabin",
								"{{cabin_id_forest}}",
								"check"
							],
							"query": [
								{
									"key": "startDate",
									"value": "2024-03-15"
								},
								{
									"key": "endDate",
									"value": "2024-03-16"
								}
							]
						},
						"description": "Verificar disponibilidad en fechas bloqueadas (debe devolver false por reserva parcial)"
					},
					"response": []
				}
			],
			"description": "Endpoints p√∫blicos para consultar disponibilidad"
		},
		{
			"name": "üë§ User Profile",
			"item": [
				{
					"name": "Get User Profile",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_professor}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/users/profile",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"users",
								"profile"
							]
						},
						"description": "Obtener perfil del usuario autenticado. El userId se obtiene autom√°ticamente del JWT token, no es necesario enviar header X-User-Id."
					},
					"response": []
				},
				{
					"name": "Update User Profile",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_professor}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"maria.gonzalez.updated@universidad.edu.co\",\n  \"documentNumber\": \"87654321\",\n  \"fullName\": \"Mar√≠a Gonz√°lez Actualizada\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/users/profile",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"users",
								"profile"
							]
						},
						"description": "Actualizar perfil del usuario autenticado. El userId se obtiene autom√°ticamente del JWT token, no es necesario enviar header X-User-Id."
					},
					"response": []
				},
				{
					"name": "Change Password",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_professor}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"currentPassword\": \"1234\",\n  \"newPassword\": \"SecurePass123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/users/change-password",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"users",
								"change-password"
							]
						},
						"description": "Cambiar contrase√±a o PIN del usuario autenticado. El userId se obtiene autom√°ticamente del JWT token, no es necesario enviar header X-User-Id. Para administradores requiere contrase√±a de m√≠nimo 6 caracteres. Para usuarios normales puede ser PIN de 4 d√≠gitos o contrase√±a de 6-50 caracteres."
					},
					"response": []
				}
			],
			"description": "Endpoints para gesti√≥n del perfil de usuario"
		},
		{
			"name": "üìã Reservations",
			"item": [
				{
					"name": "Create Reservation",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_professor}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"userId\": 2,\n  \"cabinId\": 1,\n  \"startDate\": \"2024-03-20\",\n  \"endDate\": \"2024-03-25\",\n  \"guests\": 4,\n  \"checkInTime\": \"14:00\",\n  \"checkOutTime\": \"12:00\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/reservations",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"reservations"
							]
						},
						"description": "Crear nueva pre-reserva. Incluye checkInTime y checkOutTime opcionales (formato HH:mm). El userId se obtiene autom√°ticamente del JWT token, pero tambi√©n puede especificarse en el body para compatibilidad."
					},
					"response": []
				},
				{
					"name": "Create Reservation (Testing Block)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_professor}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"userId\": 2,\n  \"cabinId\": 1,\n  \"startDate\": \"2024-03-15\",\n  \"endDate\": \"2024-03-17\",\n  \"guests\": 4,\n  \"checkInTime\": \"15:00\",\n  \"checkOutTime\": \"11:00\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/reservations",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"reservations"
							]
						},
						"description": "Crear reserva que respeta bloqueo obligatorio (15-17 marzo). Incluye checkInTime y checkOutTime."
					},
					"response": []
				},
				{
					"name": "Create Reservation (Partial Block - Should Fail)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_professor}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"userId\": 2,\n  \"cabinId\": 1,\n  \"startDate\": \"2024-03-15\",\n  \"endDate\": \"2024-03-16\",\n  \"guests\": 4,\n  \"checkInTime\": \"15:00\",\n  \"checkOutTime\": \"11:00\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/reservations",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"reservations"
							]
						},
						"description": "Intentar crear reserva parcial en bloqueo (debe fallar con 409 Conflict). Incluye checkInTime y checkOutTime."
					},
					"response": []
				},
				{
					"name": "Cancel Reservation",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_professor}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/reservations/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"reservations",
								"1"
							]
						},
						"description": "Cancelar reserva del usuario autenticado. El userId se obtiene autom√°ticamente del JWT token, no es necesario enviar header X-User-Id."
					},
					"response": []
				}
			],
			"description": "Endpoints para gesti√≥n de reservas de usuarios"
		},
		{
			"name": "‚è≥ Waiting List",
			"item": [
				{
					"name": "Claim Priority",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_professor}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"notifyToken\": \"test-token-123\",\n  \"numberOfGuests\": 3\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/waiting-list/claim",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"waiting-list",
								"claim"
							]
						},
						"description": "Reclamar prioridad usando token de notificaci√≥n"
					},
					"response": []
				}
			],
			"description": "Endpoints para gesti√≥n de lista de espera"
		},
		{
			"name": "üëë Admin - Dashboard",
			"item": [
				{
					"name": "Get Dashboard Summary",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_admin}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/dashboard",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"dashboard"
							]
						},
						"description": "Obtener resumen del dashboard administrativo"
					},
					"response": []
				}
			],
			"description": "Endpoints administrativos del dashboard"
		},
		{
			"name": "üëë Admin - Documents",
			"item": [
				{
					"name": "List All Documents",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_admin}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/documents",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"documents"
							]
						},
						"description": "Listar todos los n√∫meros de documento"
					},
					"response": []
				},
				{
					"name": "List Active Documents",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_admin}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/documents/active",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"documents",
								"active"
							]
						},
						"description": "Listar documentos activos"
					},
					"response": []
				},
				{
					"name": "Get Document by Number",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_admin}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/documents/number/99999999",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"documents",
								"number",
								"99999999"
							]
						},
						"description": "Obtener documento por n√∫mero"
					},
					"response": []
				},
				{
					"name": "Create Document",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_admin}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"documentNumber\": \"88888888\",\n  \"status\": \"ACTIVE\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/documents",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"documents"
							]
						},
						"description": "Crear nuevo documento de prueba"
					},
					"response": []
				},
				{
					"name": "Deactivate Document",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_admin}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/documents/7/deactivate",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"documents",
								"7",
								"deactivate"
							]
						},
						"description": "Desactivar documento por ID"
					},
					"response": []
				},
				{
					"name": "Activate Document",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_admin}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/documents/7/activate",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"documents",
								"7",
								"activate"
							]
						},
						"description": "Activar documento por ID"
					},
					"response": []
				}
			],
			"description": "Gesti√≥n administrativa de n√∫meros de documento"
		},
		{
			"name": "üëë Admin - Reservations",
			"item": [
				{
					"name": "List All Reservations",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_admin}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/reservations?page=0&size=20",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"reservations"
							],
							"query": [
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "20"
								}
							]
						},
						"description": "Listar todas las reservas del sistema (admin)"
					},
					"response": []
				},
				{
					"name": "Delete Reservation",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_admin}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/reservations/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"reservations",
								"1"
							]
						},
						"description": "Eliminar reserva del sistema (admin)"
					},
					"response": []
				}
			],
			"description": "Endpoints administrativos para gesti√≥n de reservas"
		},
		{
			"name": "üëë Admin - Users",
			"item": [
				{
					"name": "Force Password Change",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_admin}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/admin/users/2/force-password-change",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"users",
								"2",
								"force-password-change"
							]
						},
						"description": "Forzar que un usuario cambie su contrase√±a en el pr√≥ximo login (requiere rol ADMIN)"
					},
					"response": []
				},
				{
					"name": "List Users",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_admin}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"users"
							]
						},
						"description": "Listar todos los usuarios (ADMIN)"
					},
					"response": []
				},
				{
					"name": "List Users (Filtered)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_admin}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/users?email=john.doe@example.com",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"users"
							],
							"query": [
								{
									"key": "email",
									"value": "john.doe@example.com"
								}
							]
						},
						"description": "Listar usuarios filtrando por email exacto (ADMIN)"
					},
					"response": []
				},
				{
					"name": "Get User by ID",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_admin}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/users/2",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"users",
								"2"
							]
						},
						"description": "Obtener usuario por ID (ADMIN)"
					},
					"response": []
				},
				{
					"name": "Upsert User",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_admin}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"johnny@example.com\",\n  \"documentNumber\": \"87654321\",\n  \"fullName\": \"Johnny\",\n  \"role\": \"PROFESSOR\",\n  \"active\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/users/2",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"users",
								"2"
							]
						},
						"description": "Crear o actualizar usuario (ADMIN)"
					},
					"response": []
				},
				{
					"name": "Delete User",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_admin}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/users/2",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"users",
								"2"
							]
						},
						"description": "Desactivar/Eliminar usuario (ADMIN)"
					},
					"response": []
				}
			],
			"description": "Endpoints administrativos para gesti√≥n de usuarios"
		},
		{
			"name": "üëë Admin - Waiting List",
			"item": [
				{
					"name": "Notify Next in Queue",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_admin}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"cabinId\": 1,\n  \"startDate\": \"2024-03-20\",\n  \"endDate\": \"2024-03-25\",\n  \"windowHours\": 24\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/waiting-list/notify-next",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"waiting-list",
								"notify-next"
							]
						},
						"description": "Notificar al siguiente en la lista de espera (admin)"
					},
					"response": []
				}
			],
			"description": "Endpoints administrativos para gesti√≥n de lista de espera"
		},
		{
			"name": "üëë Admin - Pricing (Funcionalidad Real)",
			"item": [
				{
					"name": "Get Pricing Calendar (Real Data)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_admin}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/pricing/calendar/2024/3",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"pricing",
								"calendar",
								"2024",
								"3"
							]
						},
						"description": "Obtener calendario de precios con datos reales de la base de datos"
					},
					"response": []
				},
				{
					"name": "Get Pricing History (Real Data)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_admin}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/pricing/history",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"pricing",
								"history"
							]
						},
						"description": "Obtener historial completo de cambios de precios con datos reales"
					},
					"response": []
				},
				{
					"name": "Calculate Price for Specific Date",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token_admin}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/pricing/calculate?cabinId={{cabin_id_forest}}&date=2024-03-15",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"pricing",
								"calculate"
							],
							"query": [
								{
									"key": "cabinId",
									"value": "{{cabin_id_forest}}"
								},
								{
									"key": "date",
									"value": "2024-03-15"
								}
							]
						},
						"description": "Calcular precio real para una fecha espec√≠fica basado en rangos de precios"
					},
					"response": []
				}
			],
			"description": "Endpoints administrativos para gesti√≥n de precios con funcionalidad real"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Auto-generate dates for testing",
					"const today = new Date();",
					"const tomorrow = new Date(today);",
					"tomorrow.setDate(tomorrow.getDate() + 1);",
					"const nextWeek = new Date(today);",
					"nextWeek.setDate(nextWeek.getDate() + 7);",
					"",
					"pm.collectionVariables.set('today', today.toISOString().split('T')[0]);",
					"pm.collectionVariables.set('tomorrow', tomorrow.toISOString().split('T')[0]);",
					"pm.collectionVariables.set('next_week', nextWeek.toISOString().split('T')[0]);"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"description": "URL base de la API"
		},
		{
			"key": "access_token_admin",
			"value": "",
			"description": "Token de acceso para administrador"
		},
		{
			"key": "refresh_token_admin",
			"value": "",
			"description": "Token de refresh para administrador"
		},
		{
			"key": "access_token_professor",
			"value": "",
			"description": "Token de acceso para profesor"
		},
		{
			"key": "refresh_token_professor",
			"value": "",
			"description": "Token de refresh para profesor"
		},
		{
			"key": "access_token_retiree",
			"value": "",
			"description": "Token de acceso para pensionado"
		},
		{
			"key": "refresh_token_retiree",
			"value": "",
			"description": "Token de refresh para pensionado"
		}
	]
}
